<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Smooth Scrolling to next Section</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        section {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <section class="section1" style="background: red"></section>
    <section class="section2" style="background: green"></section>
    <section class="section3" style="background: blue"></section>
    <script>
        let direction, currentSection = 1, numberOfSections = 3
        const sections = document.querySelectorAll( 'section' )
        function smoothScroll( duration ) {
            
            let vh = document.querySelector( '.section1' ).clientHeight
            let startPosition = window.pageYOffset
            let distance = direction * vh
            let startTime = null
            //console.log( direction < 0 ? window.scrollY - vh : window.scrollY + vh ) 
             
            direction > 0 ? currentSection++ : currentSection--
            currentSection == 0 ? currentSection = 1 : null
            currentSection == numberOfSections + 1 ? currentSection = 3 : null
            //onsole.log( 'section: ' + currentSection )
            function animation( currentTime ) {
                if ( startTime === null ) startTime = currentTime
                let timeElapsed = currentTime - startTime
                let run = ease( timeElapsed, startPosition, distance, duration )
                window.scrollTo( 0, run )
                if ( timeElapsed < duration ) requestAnimationFrame( animation )
                
            }
            function ease(t, b, c, d) {
                t /= d / 2
                if ( t < 1 ) return c / 2 * t * t * t * t + b
                t -= 2
                return -c / 2 * ( t * t * t * t - 2 ) + b
            }
            requestAnimationFrame( animation )
        }
      document.addEventListener( 'wheel', throttle( scrollChange, 1500 ) )
      document.addEventListener( 'touchstart', test ) 
      function scrollChange( e ) {
          if ( e.deltaY > 0 ) {
            direction = 1
          } else {
            direction = -1
          }
          smoothScroll( 1300 )
      }
      function throttle( func, limit ) {
          let inThrottle
          return function() {
              const args = arguments,
                    context = this
                if ( !inThrottle ) {
                    func.apply( context, args )
                    inThrottle = true
                    setTimeout( () => ( inThrottle = false ), limit )
                }
          }
      }
      sections.forEach( section => {
        window.addEventListener( 'resize', () => {
            section.style.width = `100vw`
            section.style.height = `100vh`
        } )
      } )
      
      




    
    
  
      

    let isDown = false, startY, walk, y
    function test( e ) {
         console.log( 'section: ' + currentSection )
        //isDown = true;
        startY = e.touches[0].pageY - sections[ currentSection - 1 ].offsetTop;

        sections[ currentSection - 1 ].addEventListener("touchend", () => {
            //isDown = false;
             startY < y ? direction = -1 : direction = 1 
             console.log( direction )
             //startY > startY + walk ? direction = -1 : direction = 1
        })

        sections[ currentSection - 1 ].addEventListener("touchmove", e => {
            //if (!isDown) return;
            y = e.touches[0].pageY - sections[ currentSection - 1 ].offsetTop;
            //walk = (y - startY);
            
            
            })

            //console.log( startY > startY + walk ? 'up' : 'down' )
            
            
            
            smoothScroll( 1300 )
      }
    </script>
</body>
</html>
